---
layout: post
title: "HAZEL学习笔记_环境搭建"
categories: Algorithm
---

## Hazel 环境搭建
Hazel主要包括两部分 Hazel库和Sandbox调用
Hazel命名空间里，定义Application
### Hazel 相关库的实现
* 核心库的配置
主要通过 *HZ_PLATFORM_WINDOWS* 控制平台，通过*HZ_BUILD_DLL* 判断是库的导入还是导出
```c++
//Core.h
#pragma once

#ifdef HZ_PLATFORM_WINDOWS
	#ifdef HZ_BUILD_DLL
		#define HAZEL_API __declspec(dllexport)
	#else
		#define HAZEL_API __declspec(dllimport)
	#endif
#else
	#error Hazel only supports Windows!
#endif
```

```c++
//EntryPoint.h
#pragma once

#ifdef HZ_PLATFORM_WINDOWS

extern Hazel::Application* Hazel::CreateApplication();

int main(int argc, char** argv)
{
	auto app = Hazel::CreateApplication();
	app->Run();
	delete app;
}

#endif
```

```c++
//Application.h
#pragma once
#include "Core.h"

namespace Hazel {

	class HAZEL_API Application
	{
	public:
		Application();
		virtual ~Application();

		void Run();
	};

	// To be defined in CLIENT
	Application* CreateApplication();

}
```
```c++
// Application.cpp
#include "Application.h"

namespace Hazel {

	Application::Application()
	{
	}


	Application::~Application()
	{
	}

	void Application::Run()
	{
		while (true);
	}

}
```

```c++
//Hazel.h
#pragma once

// For use by Hazel applications

#include "Hazel/Application.h"

// ---Entry Point---------------------
#include "Hazel/EntryPoint.h"
// -----------------------------------
```

### Sandbox

```c++
#include <Hazel.h>

class Sandbox : public Hazel::Application
{
public:
	Sandbox()
	{

	}

	~Sandbox()
	{

	}

};

Hazel::Application* Hazel::CreateApplication()
{
	return new Sandbox();
}

```
## CmakeList
通过*add_definitions* 添加宏定义。
```sh
#1.cmake verson，指定cmake的最小版本号 
cmake_minimum_required(VERSION 2.8)

#2.project name，指定项目的名称，一般和项目的文件夹名称对应
project(Hazel)

# 添加宏定义
add_definitions("-DHZ_PLATFORM_WINDOWS")
add_definitions("-DWINDOWS")
add_definitions("-DHZ_BUILD_DLL")
#3.set environment variable，设置环境变量
set(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} -std=c++11")

#4.include头文件目录 
include_directories(
	               ${CMAKE_CURRENT_LIST_DIR}/Hazel/src/Hazel
	               ${CMAKE_CURRENT_LIST_DIR}/Hazel/src
                    )

#8.add link library，添加工程所依赖的库
add_library(Hazel SHARED ${CMAKE_CURRENT_LIST_DIR}/Hazel/src/Hazel/Application.cpp)

link_directories(${CMAKE_CURRENT_LIST_DIR}/build/Release)

include_directories(
	               ${CMAKE_CURRENT_LIST_DIR}/Hazel/src/Hazel
	               ${CMAKE_CURRENT_LIST_DIR}/Hazel/src
                    )
					

add_executable(Sandbox ${CMAKE_CURRENT_LIST_DIR}/Sandbox/src/SandboxApp.cpp)
target_link_libraries(Sandbox Hazel)
```




    















